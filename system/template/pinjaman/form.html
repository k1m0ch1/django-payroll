{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div>
          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-home"></i> Dashboard</a></li>
            <li><i class="fa fa-flask"></i> Data Master</li>
            <li class="active">Inventory Pinjaman</li>
          </ol>
      </div>
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
          <div class="col-md-12">
              <div class="col-md-2">
                <p><h3 class="control-label">Inventory Pinjaman</h3></p>
              </div>
          </div>                
      </div>
      
      <div class="row">
          <div class="col-md-12">
            <div class="col-md-2">
              <label class="control-label">List Karyawan</label>               
            </div>
            <input type="hidden" id="idKaryawan" name="idkaryawan" />
            <div class="col-md-10">
              <p class="" id="textKaraywan">  </p>
            
              <button class="btn btn-primary" id="pilihKaryawan" data-toggle="modal" data-target="#pilihKaryawanModal"><i class="fa fa-plus"></i> Pilih Karyawan</button> 
              <button class="btn btn-primary" id="bersih"><i class="fa fa-plus"></i> Clear</button>  
              </div>             
          </div>                
      </div>

      <div class="row">
          <div class="col-md-12">
              <div class="col-md-2">
                <p><h4 class="control-label">Barang Pinjaman</h4></p>
              </div>
          </div>                
      </div>

      <div class="row">
          <div class="col-md-12">
            <div class="col-md-2">
              <label class="control-label pull-right">Nama Barang</label>
            </div>
            <div class="form-group col-md-3">
                <select name="idbarang" class="form-control idbarang" >
                  {% for i in inventory %}
                      <option value="{{ i.id }}"> {{ i.name }}</option>
                  {% endfor %}
                </select><br/>
            </div>
            <div class="form-group col-md-8"></div>
          </div>
          <div class="col-md-12">
            <div class="col-md-2">
              <label class="control-label pull-right">Tanggal Pinjam</label>
            </div>
            <div class="form-group col-md-3">
                <input type="text" value="{{ karyawan.tanggallahir }}" class="form-control tanggalpinjam" id="datepicker" placeholder="Tanggal Pinjam" name="tanggalpinjam">                
            </div>
            <div class="form-group col-md-3">
              <button class="btn btn-primary" id="btnposting"><i class="fa fa-plus"></i> Simpan</button> 
            </div>
          </div>          
      </div>
      <!-- Your Page Content Here -->

    </section>
    <!-- /.content -->
  </div>

{% endblock %}

{% block footer %}
{% include "include/base-modal.html" %}
{% endblock %}

{% block javascript %} 
  <script src="{% static 'plugins/jQuery/jquery-2.2.3.min.js' %}"></script>
  <!-- Bootstrap 3.3.6 -->
  <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
  <!-- AdminLTE App -->
  <script src="{% static 'dist/js/app.min.js' %}"></script>
  <!-- SlimScroll 1.3.0 -->
  <script src="{% static 'plugins/slimScroll/jquery.slimscroll.min.js' %}"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
  <script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
  <script src="{% static 'plugins/datepicker/bootstrap-datepicker.js' %}"></script>
  <script src="{% static 'plugins/colorpicker/bootstrap-colorpicker.min.js' %}"></script>
  <script src="{% static 'plugins/timepicker/bootstrap-timepicker.min.js' %}"></script>
  <script src="{% static 'plugins/slimScroll/jquery.slimscroll.min.js' %}"></script>

  <script>
  $(function () {    
        
    $.ajax({
        type: "GET",
        url: 'http://{{ request.get_host }}/index/api/karyawan',
        success: function(result) {
            $('#contentKaryawan').html(result);
      }
    });

    $('#bersih').on("click", function(){
        $('#textKaraywan').text("");
        $('#idKaryawan').val("");   
        $.ajax({
            type: "GET",
            url: 'http://{{ request.get_host }}/index/api/karyawan',
            success: function(result) {
                $('#contentKaryawan').html(result);
          }
        });  
    });

    $('#datepicker').datepicker({
      autoclose: true
    })

    $('#btnposting').on("click", function(){
      $.ajax({
            type: "POST",
            url: 'http://{{ request.get_host }}/index/pinjaman/create/save',
            data: {idkaryawan: $('#idKaryawan').val(), tanggalpinjam: $('.tanggalpinjam').val(), idbarang: $('.idbarang').val(), csrfmiddlewaretoken: '{{ csrf_token }}'},
            success: function(result) {
                //var mywindow = window.open('', 'PRINT', 'height=400,width=600');
                //mywindow.document.write(result);
                //$('#contentKaryawan').html(result);
                //mywindow.print();
                //$('#contentKaryawan').printElement();
          }
        }); 
    });

  });
</script>
{% endblock %}